<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DASHBOARD</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
  </head>
  <style>
    span {
    font-size: 19px;
    font-weight: 900;
}
    .navbar-nav, a .nav-item .nav-link {
        color: aquamarine;
    }
  </style>
  <body>
    <nav class="navbar navbar-expand-sm-md-lg navbar-light bg-light">
      <a class="navbar-brand" href="/">NET PAY CALCULATOR</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNavAltMarkup"
        aria-controls="navbarNavAltMarkup"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup" style="background-color: blueviolet; padding: 20px; margin: 20px;">
        <div class="navbar-nav">
          <a class="nav-item nav-link active" href="#" style="font-weight: 700;">Understand your payslip more</a>
          <a class="nav-item nav-link" href="#" style="font-weight: 700;">Basic Salary</a>
          <p>
            <i>Basic salary</i> or base salary is the fixed amount an employee
            earns before any additions (bonuses, allowances, overtime, bonuses)
            or deductions (taxes, insurance).
          </p>
          <a class="nav-item nav-link" href="#" style="font-weight: 700;">Gross Salary</a>
          <p>
            <i>Gross salary</i> is the total pay an employee receives before any
            deductions are made.
          </p>
          <a class="nav-item nav-link" href="#" style="font-weight: 700;">NHIF</a>
          <p><i>NHIF</i> is National Health Insurance Fund.</p>
          <a class="nav-item nav-link" href="#" style="font-weight: 700;">NHDF</a>
          <p>
            <i>NHDF</i> is National Housing Development Fund, which includes
            a 1.5% levy on employee's monthly basic salaries
          </p>
          <a class="nav-item nav-link" href="#" style="font-weight: 700;">NSSF</a>
          <p>
            <i>NSSF</i> is National Social Security Fund.
            <a
              href="https://en.wikipedia.org/wiki/National_Social_Security_Fund_(Kenya)"
            ></a>
          </p>
              href="https://www.kra.go.ke/individual/filing-paying/types-of-taxes"
            ></a>
          </p>
          <a class="nav-item nav-link" href="#" style="font-weight: 700;">Net pay</a>
          <p>
            <i>Net Pay</i> is the earnings after all deductions are taken out
          </p>
        </div>
      </div>
    </nav>
    <div class="container">
      <form
        action=""
        id="myform"
        style="
          background-color: goldenrod;
          text-align: center;
          border: 2px solid black;
        "
      >
        <h1>NET PAY CALCULATOR</h1>
        <h2>Want to know how your salary deductions work?</h2>
        <p>Easy steps;</p>
        <p>
          Enter your <span>Basic Salary</span> and
          <span>Total Benefits</span> below.
        </p>
        <p>Click the <span>Submit</span> button.</p>
        <label for="basic_salary">Basic Salary:</label><br />
        <input type="number" id="basic_salary" /><br /><br />
        <label for="total_benefits">Total Benefits:</label><br />
        <input type="number" id="total_benefits" /><br /><br />
        <div
          id="error"
          style="color: red; font-style: italic; font-weight: 600"
        ></div>
        <button
          style="
            width: 20%;
            background-color: aquamarine;
            color: #1428dc;
            font-size: 20px;
            border-radius: 5px;
            font-weight: 800;
          "
        >
          Submit</button
        ><br /><br />
        <table class="table table-bordered">
          <thead>
            <tr>
              <th scope="col">Gross Salary</th>
              <th scope="col">NHIF</th>
              <th scope="col">NHDF</th>
              <th scope="col">NSSF</th>
              <th scope="col">Final Paye</th>
              <th scope="col">Net pay</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </form>
    </div>
    <script>
      let myform = document.getElementById("myform");
      myform.addEventListener("submit", function (e) {
        console.log(e);
        e.preventDefault();
        let basic_salary = parseFloat(
          document.getElementById("basic_salary").value
        );
        let total_benefits = parseFloat(
          document.getElementById("total_benefits").value
        );
        console.log(basic_salary, total_benefits);

        if (isNaN(basic_salary) || isNaN(total_benefits)) {
          document.getElementById("error").innerText =
            "Ensure you have filled all the inputs into the spaces provided ";
        } else {
          function grossSalary(basic, benefits) {
            return basic + benefits;
          }
        }

        let gross = grossSalary(basic_salary, total_benefits);

        function Nhif(gross_salary) {
          if (gross_salary <= 5999) {
            return 150;
          } else if (gross_salary <= 7999) {
            return 300;
          } else if (gross_salary <= 11999) {
            return 400;
          } else if (gross_salary <= 14999) {
            return 500;
          } else if (gross_salary <= 19999) {
            return 600;
          } else if (gross_salary <= 24999) {
            return 750;
          } else if (gross_salary <= 29999) {
            return 850;
          } else if (gross_salary <= 34999) {
            return 900;
          } else if (gross_salary <= 39999) {
            return 950;
          } else if (gross_salary <= 44999) {
            return 1000;
          } else if (gross_salary <= 49999) {
            return 1100;
          } else if (gross_salary <= 59999) {
            return 1200;
          } else if (gross_salary <= 69999) {
            return 1300;
          } else if (gross_salary <= 79999) {
            return 1400;
          } else if (gross_salary <= 89999) {
            return 1500;
          } else if (gross_salary <= 99999) {
            return 1600;
          } else {
            return 1700;
          }
        }

        let nhif = Nhif(gross);
        console.log("nhif: ", nhif);

        function Nssf(gross_salary) {
          return 0.06 * gross_salary;
        }
        let nssf = Nssf(gross);
        console.log("nssf: ", nssf);

        function Nhdf(gross_salary) {
          return 0.015 * gross_salary;
        }
        let nhdf = Nhdf(gross);
        console.log("nhdf: ", nhdf);

        function taxableIncome(gross_salary, nhif, nhdf, nssf) {
          return gross_salary - nhif - nhdf - nssf;
        }
        let taxable_income = taxableIncome(gross, nhif, nhdf, nssf);
        console.log("taxable_income: ", taxable_income);

        function Payee(taxable_income) {
          let rem = 0;
          let paye = 0;
          if (taxable_income <= 24000) {
            paye = 0;
          } else if (taxable_income > 24000) {
            paye = 0.1 * 24000;
            rem = taxable_income - 24000;
          }
          if (rem > 0) {
            if (rem > 8333) {
              paye = paye + 0.25 * 8333;
              rem = rem - 8333;
            } else if (rem <= 8333) {
              paye = paye + 0.25 * rem;
              rem = 0;
            }
          }
          if (rem > 0) {
            if (rem > 467667) {
              paye = paye + 0.3 * 467667;
              rem = rem - 467667;
            } else if (rem <= 467667) {
              paye = paye + 0.3 * rem;
              rem = 0;
            }
          }
          if (rem > 0) {
            if (rem > 300000) {
              paye = paye + 0.325 * 300000;
              rem = rem - 300000;
            } else if (rem <= 300000) {
              paye = paye + 0.325 * rem;
              rem = 0;
            }
          }

          if (rem > 0) {
            paye = rem * 0.35;
          }
          return paye;
        }

        let payee = Payee(taxable_income);
        console.log("Payee: ", payee);
        let relief = 2400;

        function netPay(gross, nhif, nssf, nhdf, payee, relief) {
          return gross - nhif - nssf - nhdf - payee + relief;
        }
        let net_pay = netPay(gross, nhif, nssf, nhdf, payee, relief);
        console.log("Net Pay: ", net_pay);

        let table = document.getElementById("table");
        let tbody = document.getElementsByTagName("tbody")[0];
        let newrow = tbody.insertRow();

        newrow.insertCell(0).textContent = gross;
        newrow.insertCell(1).textContent = nhif;
        newrow.insertCell(2).textContent = nhdf;
        newrow.insertCell(3).textContent = nssf;
        newrow.insertCell(4).textContent = payee;
        newrow.insertCell(5).textContent = net_pay;

        myform.reset();
        document.getElementById("error").innerText = "";
      });
    </script>

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
